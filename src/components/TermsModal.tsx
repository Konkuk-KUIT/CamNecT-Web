import { HeaderLayout } from "../layouts/HeaderLayout";
import { MainHeader } from "../layouts/headers/MainHeader";

interface TermsModalProps {
    isOpen: boolean;
    onClose: () => void;
    type: 'service' | 'privacy';
}

export const TermsModal = ({ isOpen, onClose, type }: TermsModalProps) => {
    if (!isOpen) return null;

    const modalContent = {
        service: {
            title: '서비스 이용약관',
            subtitle: '[ 캠넥트 서비스 이용약관 ]',
            content: `
1. 본 약관은 캠넥트(이하 “회사”)가 제공하는 캠퍼스 커뮤니티 및 네트워킹 서비스의 이용과 관련하여 회사와 회원 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다. 회원은 본 약관에 동의함으로써 서비스 이용계약이 성립됩니다.

2. 회사는 캠퍼스 커뮤니티 게시판, 대외활동 팀 빌딩 매칭, 커피챗 매칭 및 네트워킹 기능 등 다양한 서비스를 제공합니다. 회사는 운영상 또는 기술상 필요에 따라 서비스의 일부 또는 전부를 변경하거나 중단할 수 있으며, 이 경우 공지사항을 통해 사전에 고지합니다.

3. 회원은 가입 시 정확하고 최신의 정보를 제공하여야 하며, 허위 정보 기재, 타인의 개인정보 도용, 허위 학적 정보 입력 등의 경우 회사는 사전 통지 없이 서비스 이용을 제한하거나 계정을 삭제할 수 있습니다. 계정 정보 관리의 책임은 회원 본인에게 있습니다.

4. 회원은 서비스 이용 시 다음 행위를 하여서는 안 됩니다. 타인의 지식재산권 및 권리 침해, 욕설·비방·혐오 표현, 성희롱 또는 차별적 발언, 음란물 게시, 허위 사실 유포, 상업적 광고 및 스팸 행위, 금전 요구 또는 사기 행위, 반복적 괴롭힘, 개인정보 무단 수집, 서비스 운영을 방해하는 해킹 및 매크로 이용 행위 등은 엄격히 금지됩니다.

5. 회원이 작성한 게시물의 저작권은 작성자에게 귀속됩니다. 다만 회사는 서비스 운영, 홍보, 개선을 위하여 해당 게시물을 서비스 내에서 무상으로 사용할 수 있는 권한을 갖습니다. 회사는 운영 정책에 위반되거나 다수의 신고가 접수된 게시물에 대하여 사전 통지 없이 삭제, 블라인드 또는 노출 제한 조치를 할 수 있습니다.

6. 서비스에는 신고 기능이 제공되며, 신고 접수 시 회사는 내부 운영 기준에 따라 검토 후 조치합니다. 위반 행위가 경미한 경우 경고 조치를 할 수 있으며, 반복 위반 시 7일 또는 30일 이용정지를 할 수 있습니다. 성희롱, 사기, 금전 요구, 개인정보 유출, 반복적 괴롭힘 등 중대한 위반 행위의 경우 즉시 영구정지 및 재가입 제한 조치를 취할 수 있습니다.

7. 커피챗 및 팀 매칭 기능은 회원 간 자율적 네트워킹을 지원하는 플랫폼 기능입니다. 회사는 회원 간 실제 만남, 대화, 협업 과정에서 발생하는 분쟁, 손해, 거래 등 결과에 대해 직접 개입하지 않으며 어떠한 법적 책임도 지지 않습니다. 다만 신고가 접수된 경우 운영 정책에 따라 가해 회원에 대한 이용 제한 조치를 취할 수 있습니다.

8. 회원은 언제든지 서비스 내 설정 메뉴를 통해 탈퇴를 요청할 수 있으며, 탈퇴 시 관련 법령에 따라 보관이 필요한 정보를 제외한 개인정보는 즉시 삭제됩니다. 운영 정책 위반으로 영구정지된 회원은 회사의 승낙 없이 재가입할 수 없습니다.

9. 회사는 천재지변, 시스템 점검, 통신 장애 등 불가항력적 사유로 인한 서비스 중단에 대하여 책임을 지지 않습니다. 또한 회원 간의 분쟁이나 회원이 게시한 정보의 신뢰도 및 정확성으로 인하여 발생한 법적 책임은 해당 회원 본인에게 있습니다.

10. 본 약관은 대한민국 법률에 따라 해석 및 적용되며, 서비스 이용과 관련하여 분쟁이 발생할 경우 대한민국 민사소송법상 관할 법원을 전속 관할로 합니다.`
        },
        privacy: {
            title: '개인정보 처리방침',
            subtitle: '[ 캠넥트 개인정보 처리방침 ]',
            content: `1. 수집하는 개인정보 항목: 회사는 서비스 제공을 위하여 다음과 같은 개인정보를 수집합니다.
• 필수 항목: 성명, 이메일 주소, 소속 대학, 학과, 연락처(휴대폰 번호), 학적 확인 정보.
• 자동 수집 항목: IP주소, 쿠키, 서비스 이용 기록, 기기 정보.

2. 개인정보의 이용 목적: 수집된 정보는 회원 식별 및 본인 확인, 대학생 인증, 커피챗 및 팀 매칭 서비스 제공, 맞춤형 콘텐츠 추천, 공지사항 전달, 서비스 개선 연구 및 부정이용 방지의 목적으로 이용됩니다.

3. 개인정보의 보유 및 파기: 회사는 회원 탈퇴 시 수집된 개인정보를 지체 없이 파기합니다. 다만, 부정 이용 기록이 있는 경우 재가입 방지를 위해 일정 기간(6개월~1년) 보관할 수 있으며, 전자상거래법 등 관련 법령에 따라 보관이 필요한 경우 해당 법령이 정한 기간 동안 보관 후 파기합니다.

4. 회사는 원칙적으로 이용자의 개인정보를 외부 및 제3자에게 제공하지 않습니다. 다만, 이용자의 동의가 있는 경우나 법령의 규정에 의거하여 수사기관의 요청이 있는 경우에 한하여 예외적으로 제공합니다.

5. 회사는 서비스 운영의 효율성을 위하여 클라우드 서버 운영, 본인인증 등을 외부 업체에 위탁할 수 있습니다. 이 경우 관련 법령에 따라 개인정보가 안전하게 관리되도록 계약 체결 및 감독을 철저히 합니다.

6. 이용자는 언제든지 자신의 개인정보에 대하여 열람, 정정, 삭제, 처리 정지를 요청할 수 있습니다. 회사는 본인 확인 절차를 거친 후 지체 없이 관련 법령에 따라 요청 사항을 처리합니다.

7. 회사는 개인정보의 분실, 도난, 유출 방지를 위해 암호화 등 기술적·관리적 보호조치를 시행합니다. 개인정보 보호와 관련한 문의 및 불만 처리를 위하여 개인정보 보호 책임자를 지정하여 운영하고 있습니다.`
        }
    };

    const { title, subtitle, content } = modalContent[type];

    return (
        <div className="flex items-center justify-center fixed inset-0 z-50 bg-white">
            <div className="w-full max-w-[430px] h-full bg-white flex flex-col">
                <HeaderLayout
                    headerSlot={
                        <MainHeader
                            title={title}
                            leftAction={{ onClick: onClose }}
                        />
                    }
                >
                    <div className="h-full w-full px-[25px] pt-[15px] flex flex-col flex-1 overflow-y-auto">
                        <span className="flex text-left w-full py-[15px] border-b border-gray-150 text-b-24-hn text-gray-750">{subtitle}</span>
                        <div className="pt-[20px] text-r-12 text-gray-750">
                            {content.split('\n\n').filter(p => p.trim()).map((paragraph, index) => {
                                // 숫자로 시작하는 항목인지 확인
                                const numberedMatch = paragraph.trim().match(/^(\d+)\.\s*(.+)/s);
                                
                                if (numberedMatch) {
                                    const [, number, text] = numberedMatch;
                                    return (
                                        <div key={index} className="flex gap-[7px] mb-[20px]">
                                            <span className="flex-shrink-0">{number}.</span>
                                            <span>{text}</span>
                                        </div>
                                    );
                                }
                                
                                return <div key={index}>{paragraph}</div>;
                            })}
                        </div>
                    </div>
                </HeaderLayout>
            </div>
        </div>
    );
};